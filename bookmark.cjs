/**
 * @file bookmark.cjs
 * @name netscape-bookmark-tree
 * @version 2.1.0 Build.1684223288001
 * @author ZMY
 * @license MIT
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("node:os"),t=require("parse5");function n(e,t,n){const r="    ";function a(e,i){return e.reduce((function(e,s){const{name:o,attributes:c,children:u}=t(s,i),l=i.concat(s),d=i.reduce((e=>e+r),n+r),p=function(e){return e?e.reduce((function(e,t){return`${e} ${t[0].toUpperCase()}="${t[1]}"`}),""):""}(c);let f;if(Array.isArray(u)){const e=a(u,l),t=[`<DT><H3${p}>${o}</H3>`,"<DL><p>",r+e,"</DL><p>"];0===u.length&&t.splice(2,1),f=t.join(d)}else f=`<DT><A${p}>${o}</A>`;return e?e+d+f:f}),"")}return e.map((function(e){const{children:n,name:i}=t(e);let s=a(n,[]);return s=`\n<!DOCTYPE NETSCAPE-Bookmark-file-1>\n\x3c!-- This is an automatically generated file.\n     It will be read and overwritten.\n     DO NOT EDIT! --\x3e\n<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">\n<TITLE>Bookmarks</TITLE>\n<H1>${i}</H1>\n<DL><p>\n${r}${s}\n</DL><p>\n`,s=s.trimStart(),s}))}const r={parseHTML:e=>t.parseFragment(e).childNodes,getTag:e=>e.nodeName,getName:e=>e.childNodes[0].value,setAttrs(e,t){const{attrs:n}=t;return n.map((function(t){return e[t.name]=t.value,[t.name,t.value]}))}},a={parse:{each(e,t){const n=(a=t.parentPath)[a.length-1],r=t.index;var a;return e.index=r,n?(e.id=`${n.id}_${r}`,e.pid=n.id):e.id=r.toString(),e},setChildren(e,t){e.children=t}},stringify:{each:function(e){return e},eol:e.EOL}};function i(e,t){return t=Object.assign({},a.parse,t),function(e,t,n,r){const a=t.replace(/<!DOCTYPE [\s\S]+?<\/TITLE>|<DT>|<p>/g,""),i=function t(a,i){const s=[];return a.forEach((function(a){const o=e.getTag(a);function c(t){const r=s.length;let c={name:e.getName(a)};const u=e.setAttrs(c,a);c=n(c,{parentPath:i,isLeaf:t,index:r,attributes:u,tag:o},a)||c,s.push(c)}if("a"===o)c(!0);else if("h3"===o||"h1"===o)c(!1);else if("dl"===o){const e=s[s.length-1],n=i.concat(e),o=t(a.childNodes,n);r(e,o)}})),s}(e.parseHTML(a),[]);return i}(r,e,t.each,t.setChildren)}exports.default=i,exports.defaultOptions=a,exports.parse=i,exports.stringify=function(e,t){return n(e,(t=Object.assign({},a.stringify,t)).each,t.eol)};
